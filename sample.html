<!DOCTYPE html>
<html>
    <head>
        <title>formtask </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
    </head>
    <title>MyForm</title>
    <style type="text/css">
    body{
    margin-top: 30px;
    margin-left: 50px;
    }
    .bt-forMarginBorder{
    width: 60%;
    padding-left: 120px;
    
    border-radius: 30px;
    }
    
    h1{
    margin-left:20px;
    font-size: 20px;
    color: black;
    }
    .forHeading{
    margin-left:25%;
    font-size: 20px;
    font-family:courier;
    color:black;
    /*    background-color: grey;
    color: black;
    width: 90%;
    padding: 10px;*/
    }
    .forlabelinprewingdetials{
    color: black;
    font-size: 20px;
    font-style: courier;
    margin-left: 20px;
    }
    span{
    color: red;
    margin-left: 20px;
    }
    .forlabel{
    margin-left: 10px;
    color:black;
    }
    .bt-submit{
    margin-left: 20%;
    margin-bottom: 20%;
    }
    .bt-forReset{
    margin-left: 6%;
    margin-bottom: 20%;
    }
    .forEditButton{
    background-color:green;
    color:black;
    width:30%;
    margin-left:60px;
    margin-bottom: 40px;
    }
    .fordeletebutton{
    color:white;
    width:40%;
    margin-left:60px;
    margin-bottom: 40px;
    padding: 10px;
    padding-left:10px;
    }
    /*    .panel-heading{
    background-color: red;
    color: black;
    width: 20%;
    margin-left:31%;
    font-size: 20px;
    font-family:courier;
    color:black;
    }*/
    input[type=text]{
    width: 70%;
    margin-top: 10px;
    margin-left: 20px;
    }
    input[type=email]{
    width: 70%;
    margin-top: 10px;
    margin-left: 20px;
    }
    input[type="number"]{
    width: 70%;
    margin-top: 10px;
    margin-left: 20px;
    }
    input[type="password"]{
    width: 70%;
    margin-top: 10px;
    margin-left: 20px;
    }
    .forDisplayingchar{
    font-size:15px;
    margin-left: 20px;
    color: black;
    
    }
    .forshowing{
    font-size:10px;
    
    }
    .boxModel{
    margin-right: 2cm;
    width: 230px;
    padding: 2px;
    border: 2px solid gray;
    margin: 0;
    }
    </style>
    <body >
        <div class="container"  >
            <div ng-app="myApp" ng-controller="formController" >
                <div class="pannel" >
                    <form class="panel panel-default bt-forMarginBorder"  name="myForm" novalidate><br>
                        <div div="form-group" class="pannel-body">
                            <!-- <div class="panel-header ">
                                <div class="panel panel-heading"></div>
                                <h1  class="forHeading">SIGN UP FORM</h1>
                            </div> -->
                            <div class="row"></div>
                            <div  class=" forHeading"  >SIGN UP</div>
                            
                            <label  class="forlabel" for="FirstName">First Name</label><br>
                            <input type="text" name="FirstName" class="form-control" align="center" ng-minlength=3 ng-maxlength=20 ng-model="user.firstname" placeholder="nithish"  ng-required="true">
                            <span ng-show=" myForm.FirstName.$error.required && myForm.FirstName.$dirty "> please enter First Name</span>
                            <span ng-show=" myForm.FirstName.$error.minlength">Name must be greater than 3char</span>
                        </div>
                        <div class="form-group">
                            <label class="forlabel" for="LastName">Last Name</label>
                            <input type="text" name="LastName" class="form-control" align="center" placeholder="bharath" ng-minlength=3 ng-maxlength=20  ng-model="user.lastname" ng-required="true">
                            <span ng-show=" myForm.LastName.$error.required && myForm.LastName.$dirty"> please enter Lastst Name</span>
                            <span  ng-show=" myForm.LastName.$error.minlength">Name must be greater than 3char</span>
                        </div>
                        <div class="form-group">
                            <label class="forlabel">MobileNumber</label>
                            <input type="text" name="mobileNumber" class="form-control" align="center" numbersOnly  ng-model="user.mobilenumber" placeholder="9092458062" ng-minlength=4    ng-maxlength=10 ng-required="true"  >
                            <span ng-show=" myForm.mobileNumber.$error.required && myForm.mobilenumber.$dirty" >pls enter mobile number</span>
                            <span  ng-show="myForm.mobileNumber.$error.minlength" >please enter valid number</span>
                        </div>
                        
                        <div class="form-group">
                            <label class="forlabel" for="Email">Email</label>
                            <input type="email" name="email" class="form-control" align="center" placeholder="abc@yopmail.com"
                            ng-pattern="word" ng-model="user.Email" ng-pattern='/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/' ng-required="true" >
                            <!--                                 <span ng-show="myForm.email.$error.required && myForm.email.$dirty">pls enter email-id</span>
                            -->                                <span ng-show="myForm.email.$error.required && myForm.email.$error.pattern && myForm.email.$touched"> pls enter valid email-id</span>
                        </div>
                        
                        <div class="form-group">
                            <label class="forlabel" for="Password">Password</label>
                            <input type="text" name="Password"  ng-pattern="/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/" class="form-control"  placeholder="Nithih" ng-model="user.password" ng-required="true">
                            
                            <span ng-show="myForm.Password.$error.pattern && myForm.Password.$touched">pls enter valid password</span>
                            
                        </div>
                        <div class="form-group">
                            <label  class="forlabel" for="Confirm Password">Confirm Password</label>
                            <input type="text" name="CPassword" class="form-control" align="center" placeholder="Nithish" ng-model="user.confirm" ng-required="true" ng-pattern="user.password">
                            <span ng-show="myForm.Password.$touched && myForm.CPassword.$invalid ">password dsnt match</span>
                        </div>
                        <input type="submit" class="btn btn-primary btn-lg bt-submit" ng-disabled="myForm.$invalid" ng-click="submit(user,data)" value="SUBMIT">
                        <button type="reset"  class="btn btn-primary btn-lg bt-forReset" ng-disabled="!user.firstname && !user.lastname  && !user.mobilenumber &&
                        !user.mobilenumber && !user.Email  && !user.password && !user.confirm" ng-click="reset()">RESET
                        </button> <br><br> <br>
                    </div>
                    <div ng-show="myDetials" class=" panel panel-default col-md-3" ng-repeat="data in emptyarray track by $index" ><br><br>
                        <h1 class="panel panel-header">{{data.firstname +" " + data.lastname}}</h1>
                        <label>First Name:</label><p>{{data.firstname}}</p>
                        <label>Last Name:</label><p>{{data.lastname}}</p>
                        <label>Mobile Number:</label><p>{{data.mobilenumber}}</p>
                        <LABEL>EMAIL_ID:</LABEL><P>{{data.Email}}</P>
                        <label>Password Hint:</label><p>{{data.hintPassword}}</p>
                        <button class="btn btn-lg  forEditButton" ng-click="Edit(data)">EDIT</button>
                        <button class="btn btn-danger  fordeletebutton  " ng-click="removeRecord(data)">DELETE</button>
                        <!-- <button class="btn btn-lg  forEditButton" ng-click="sameEmail()">SAME EMAIL</button> -->
                        
                    </div>
                </div>
            </div>
        </form>
        
        
        <script>
        
        var app = angular.module('myApp', []);
        app.controller('formController', function($scope){
        
        
        $scope.emptyarray=[];
        $scope. myDetials=false;
        $scope.sampledisable=true;
        $scope.user = {firstName:" ", lastName:"" , mobilenumber:"",Email:"",Password:"",confirm:"" ,hintPassword:""}
        
        // $scope.disablereset=false;
        // $scope.user = {firstName:" ", lastName:"",Email: "" , mobilenumber: "" , password: "" , confirm: "",  hintPassword:"" }
        // if( $scope.user.firstName!= " "|| $scope.user.lastName!= " "|| $scope.user.Email!=" "|| $scope.user.mobilenumber!=" " ||  $scope.user.password!=" " || $scope.user.confirm!=" "){
        //     $scope.disablereset=true;
        // }
        //             $scope.phoneNumberPattern = (function() {
        //     var regexp = /^\(?(\d{3})\)?[ .-]?(\d{3})[ .-]?(\d{4})$/;
        //     return {
        //         test: function(value) {
        //             if( $scope.requireTel === false ) {
        //                 return true;
        //             }
        //             return regexp.test(value);
        //         }
        //     };
        // })();
        // $scope.passwordHelp=function(){
        //       $scope.help="password should have one uppercase and one special character";
        // };
        $scope.submit = function(u,data){ //updated value is in u
        u.hintPassword=u.password.replace(/.(?=.{2,}$)/g, 'x');       //this is to print the last 4 char otheres will be
       
        
        $scope.emptyarray.push(u);
        $scope. myDetials=!false;
        $scope.user = {firstName:" ", lastName:"" , mobilenumber:"",Email:"",Password:"",confirm:"" ,hintPassword:""}
   
        
        // if($scope.emptyarray!=[]){
        //     console.log("test");
        // if ( u.email==$scope.emptyarray[0].email) {
        // alert ("emial already exist");
        // }
        // else{
        //    u.hintPassword=u.password.replace(/.(?=.{2,}$)/g, 'x');       //this is to print the last 4 char otheres will be
        // $scope.emptyarray.push(u);
        // $scope. myDetials=!false;
        // }}
        // else{
        //     u.hintPassword=u.password.replace(/.(?=.{2,}$)/g, 'x');       //this is to print the last 4 char otheres will be
        // $scope.emptyarray.push(u);
        // $scope. myDetials=!false;
        // }
        
        };
        $scope.removeRecord=function(data){
        $scope.emptyarray.splice($scope.emptyarray.indexOf(data),1);
        $scope.user={};
        }
        $scope.Edit=function(data){
        $scope.user=data;
        $scope.emptyarray.splice($scope.emptyarray.indexOf(data),1);
        // $scope.emptyarray.splice(  $scope.emptyarray.indexOf(data),1);
        // removes the current data
        // u.lastname="";u.mobilenumber="";u.Email=" ";u.mobilenumber="";u.hintPassword="";
        
        
        // $scope.user.lastName=input.lastname;
        // $scope.user.mobilenumber=input.mobilenumber;
        };
        
        $scope.reset=function(){
        $scope.user = {firstName:" ", lastName:"" , mobilenumber:"",Email:"",Password:"",confirm:"" ,hintPassword:""}
        };
        });
        </script>
        
    </body>
</html>